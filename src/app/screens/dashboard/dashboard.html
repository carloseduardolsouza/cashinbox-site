<div class="dashboard-container">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <img 
          src="../../../assets/Logo-CashInBox-icon-tipografia.png" 
          alt="Cash in Box" 
          class="dashboard-logo"
          (click)="voltarParaHome()"
        />
        <h1>Meu Painel</h1>
      </div>
      <div class="header-right">
        <div class="user-info">
          <span class="user-avatar">{{ usuario.avatar }}</span>
          <div class="user-details">
            <strong>{{ usuario.nome }}</strong>
            <span>{{ usuario.email }}</span>
          </div>
        </div>
        <button class="btn-logout" (click)="logout()">
          Sair
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="dashboard-main">
    <!-- Sidebar - Lista de Empresas -->
    <aside class="dashboard-sidebar">
      <div class="sidebar-header">
        <h3>Minhas Empresas</h3>
        <span class="empresa-count">{{ empresas.length }}</span>
      </div>
      
      <div class="empresas-list">
        <div 
          class="empresa-item"
          *ngFor="let empresa of empresas"
          [class.selected]="empresaSelecionada?.id === empresa.id"
          (click)="selecionarEmpresa(empresa)"
        >
          <div class="empresa-icon">ğŸ¢</div>
          <div class="empresa-info">
            <strong>{{ empresa.nomeFantasia }}</strong>
            <span>{{ empresa.cnpj }}</span>
          </div>
          <div class="empresa-status" [ngClass]="getStatusClass(empresa.status)">
            {{ getStatusLabel(empresa.status) }}
          </div>
        </div>
      </div>

      <button class="btn-add-empresa">
        â• Adicionar Empresa
      </button>
    </aside>

    <!-- Content Area -->
    <div class="dashboard-content" *ngIf="empresaSelecionada">
      <!-- Empresa Header -->
      <div class="empresa-header">
        <div class="empresa-header-info">
          <div class="empresa-icon-large">ğŸ¢</div>
          <div>
            <h2>{{ empresaSelecionada.nomeFantasia }}</h2>
            <p class="razao-social">{{ empresaSelecionada.razaoSocial }}</p>
            <p class="cnpj">CNPJ: {{ empresaSelecionada.cnpj }}</p>
          </div>
        </div>
        <div class="empresa-header-actions">
          <button class="btn-edit">âš™ï¸ Editar</button>
        </div>
      </div>

      <!-- Plano Card -->
      <section class="plano-section">
        <h3 class="section-title">ğŸ“‹ InformaÃ§Ãµes do Plano</h3>
        
        <div class="plano-card">
          <div class="plano-header">
            <div class="plano-info">
              <span class="plano-badge">{{ empresaSelecionada.plano }}</span>
              <h4>Plano {{ empresaSelecionada.plano }}</h4>
              <p class="plano-valor">R$ {{ empresaSelecionada.valorPlano.toFixed(2) }}</p>
            </div>
            <div class="plano-status">
              <div class="status-badge" [ngClass]="getStatusClass(empresaSelecionada.status)">
                {{ getStatusLabel(empresaSelecionada.status) }}
              </div>
            </div>
          </div>

          <div class="plano-vencimento">
            <div class="vencimento-info">
              <span class="vencimento-label">PrÃ³ximo Vencimento</span>
              <span class="vencimento-data">
                {{ empresaSelecionada.dataVencimento | date: 'dd/MM/yyyy' }}
              </span>
              <span class="vencimento-dias">
                {{ getDiasRestantes(empresaSelecionada.dataVencimento) }} dias restantes
              </span>
            </div>

            <div class="vencimento-progress">
              <div 
                class="progress-bar" 
                [style.width.%]="(getDiasRestantes(empresaSelecionada.dataVencimento) / 30) * 100"
              ></div>
            </div>
          </div>

          <div class="plano-actions">
            <button class="btn-renovar">ğŸ”„ Renovar Plano</button>
            <button class="btn-mudar" (click)="navegarParaPlanos()">
              ğŸ“Š Mudar de Plano
            </button>
          </div>
        </div>
      </section>

      <!-- MÃ³dulos Ativos -->
      <section class="modulos-section">
        <div class="section-header-modulos">
          <h3 class="section-title">ğŸ¯ MÃ³dulos Ativos</h3>
          <button class="btn-add-modulo" (click)="navegarParaModulos()">
            â• Adicionar MÃ³dulo
          </button>
        </div>

        <div class="modulos-grid">
          <div class="modulo-card" *ngFor="let modulo of empresaSelecionada.modulosAtivos">
            <div class="modulo-icon">
              <span *ngIf="modulo === 'FarmÃ¡cia'">ğŸ’Š</span>
              <span *ngIf="modulo === 'CRM Inteligente'">ğŸ¯</span>
              <span *ngIf="modulo === 'Fluxo de Caixa'">ğŸ’°</span>
              <span *ngIf="modulo === 'Supermercado'">ğŸ›’</span>
              <span *ngIf="modulo === 'Estoque'">ğŸ“¦</span>
            </div>
            <h4>{{ modulo }}</h4>
            <p>Em uso</p>
            <button class="btn-configurar">âš™ï¸ Configurar</button>
          </div>
        </div>
      </section>

      <!-- Quick Stats -->
      <section class="stats-section">
        <h3 class="section-title">ğŸ“Š VisÃ£o Geral</h3>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">ğŸ’°</div>
            <div class="stat-info">
              <span class="stat-label">Faturamento do MÃªs</span>
              <span class="stat-value">R$ 45.890,00</span>
              <span class="stat-change positive">+12.5%</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">ğŸ‘¥</div>
            <div class="stat-info">
              <span class="stat-label">Clientes Ativos</span>
              <span class="stat-value">1.234</span>
              <span class="stat-change positive">+8.3%</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">ğŸ“ˆ</div>
            <div class="stat-info">
              <span class="stat-label">Vendas Hoje</span>
              <span class="stat-value">87</span>
              <span class="stat-change positive">+15.2%</span>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">ğŸ‚</div>
            <div class="stat-info">
              <span class="stat-label">Mensagens CRM Enviadas</span>
              <span class="stat-value">342</span>
              <span class="stat-change positive">+25.0%</span>
            </div>
          </div>
        </div>
      </section>

      <!-- NotificaÃ§Ãµes -->
      <section class="notificacoes-section">
        <h3 class="section-title">ğŸ”” NotificaÃ§Ãµes Recentes</h3>
        
        <div class="notificacoes-list">
          <div class="notificacao-item">
            <div class="notificacao-icon success">âœ“</div>
            <div class="notificacao-content">
              <strong>Mensagens de AniversÃ¡rio Enviadas</strong>
              <p>15 clientes receberam mensagens de feliz aniversÃ¡rio hoje</p>
              <span class="notificacao-time">HÃ¡ 2 horas</span>
            </div>
          </div>

          <div class="notificacao-item">
            <div class="notificacao-icon info">ğŸ“Š</div>
            <div class="notificacao-content">
              <strong>RelatÃ³rio Mensal DisponÃ­vel</strong>
              <p>Seu relatÃ³rio financeiro de dezembro estÃ¡ pronto</p>
              <span class="notificacao-time">HÃ¡ 5 horas</span>
            </div>
          </div>

          <div class="notificacao-item">
            <div class="notificacao-icon warning">âš ï¸</div>
            <div class="notificacao-content">
              <strong>RenovaÃ§Ã£o PrÃ³xima</strong>
              <p>Seu plano vence em 15 dias. Renove para nÃ£o perder acesso</p>
              <span class="notificacao-time">Ontem</span>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>
</div>