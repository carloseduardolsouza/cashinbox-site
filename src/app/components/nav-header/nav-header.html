<div id="nav-header" [class.scrolled]="isScrolled">
  <img 
    src="img/Logo-CashInBox-icon-tipografia.png" 
    alt="logo cash in box" 
    id="logo-header"
    (click)="navigateToHome()"
  />

  <div class="section-right">
    <!-- Menu de navegação (sempre visível) -->
    <div class="section-dropdown">
      <!-- Link do Dashboard só aparece quando logado -->
      <p 
        *ngIf="isLoggedIn"
        routerLink="/dashboard" 
        routerLinkActive="active"
        [routerLinkActiveOptions]="{exact: false}"
      >
        Meu Painel
      </p>

      <p 
        routerLink="/plataforma" 
        routerLinkActive="active"
        [routerLinkActiveOptions]="{exact: false}"
      >
        Plataforma
      </p>

      <p 
        routerLink="/download" 
        routerLinkActive="active"
        [routerLinkActiveOptions]="{exact: false}"
      >
        Download
      </p>
      <p 
        routerLink="/precos" 
        routerLinkActive="active"
        [routerLinkActiveOptions]="{exact: false}"
      >
        Preços
      </p>
      <p 
        routerLink="/contato" 
        routerLinkActive="active"
        [routerLinkActiveOptions]="{exact: false}"
      >
        Contato
      </p>
    </div>

    <!-- Botões para usuários NÃO logados -->
    <div class="auth-buttons" *ngIf="!isLoggedIn">
      <button id="button-login" (click)="navigateToLogin()">Login</button>
      <button id="button-cadastro" (click)="navigateToCadastro()">Começar Grátis</button>
    </div>

    <!-- Informações do usuário logado -->
    <div class="user-section" *ngIf="isLoggedIn">
      <div class="user-info">
        <span class="user-avatar">{{ userAvatar }}</span>
        <span class="user-name">{{ userName }}</span>
      </div>
      <button class="btn-logout" (click)="logout()">Sair</button>
    </div>

    <button 
      class="mobile-menu-toggle" 
      (click)="toggleMobileMenu()"
      [attr.aria-label]="mobileMenuOpen ? 'Fechar menu' : 'Abrir menu'"
      [attr.aria-expanded]="mobileMenuOpen"
    >
      {{ mobileMenuOpen ? '✕' : '☰' }}
    </button>
  </div>
</div>

<!-- Menu Mobile -->
<div class="mobile-menu" [class.open]="mobileMenuOpen">
  <!-- Informações do usuário no mobile (se logado) -->
  <div class="mobile-menu-user" *ngIf="isLoggedIn">
    <div class="mobile-user-info">
      <span class="mobile-user-avatar">{{ userAvatar }}</span>
      <span class="mobile-user-name">{{ userName }}</span>
    </div>
  </div>

  <!-- Links de navegação (sempre visíveis) -->
  <div class="mobile-menu-links">
    <!-- Link do Dashboard só aparece quando logado -->
    <p 
      *ngIf="isLoggedIn"
      routerLink="/dashboard" 
      routerLinkActive="active" 
      (click)="closeMobileMenu()"
      [routerLinkActiveOptions]="{exact: false}"
    >
      Meu Painel
    </p>

    <p 
      routerLink="/plataforma" 
      routerLinkActive="active" 
      (click)="closeMobileMenu()"
      [routerLinkActiveOptions]="{exact: false}"
    >
      Plataforma
    </p>

    <p 
      routerLink="/download" 
      routerLinkActive="active" 
      (click)="closeMobileMenu()"
      [routerLinkActiveOptions]="{exact: false}"
    >
      Download
    </p>
    <p 
      routerLink="/precos" 
      routerLinkActive="active" 
      (click)="closeMobileMenu()"
      [routerLinkActiveOptions]="{exact: false}"
    >
      Preços
    </p>
    <p 
      routerLink="/contato" 
      routerLinkActive="active" 
      (click)="closeMobileMenu()"
      [routerLinkActiveOptions]="{exact: false}"
    >
      Contato
    </p>
  </div>

  <!-- Botões do mobile -->
  <div class="mobile-menu-buttons">
    <!-- Botões de login/cadastro (apenas se NÃO logado) -->
    <ng-container *ngIf="!isLoggedIn">
      <button 
        id="button-login" 
        (click)="navigateToLogin(); closeMobileMenu()"
      >
        Login
      </button>
      <button 
        id="button-cadastro" 
        (click)="navigateToCadastro(); closeMobileMenu()"
      >
        Começar Grátis
      </button>
    </ng-container>

    <!-- Botão de logout (apenas se logado) -->
    <button 
      *ngIf="isLoggedIn"
      class="btn-logout-mobile" 
      (click)="logout(); closeMobileMenu()"
    >
      Sair
    </button>
  </div>
</div>